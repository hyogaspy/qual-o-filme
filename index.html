<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Cinedle - Adivinhe o Filme</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; text-align: center; background: #121212; color: white; padding: 20px; }
        
        input { 
            padding: 10px; width: 300px; border-radius: 5px; border: 1px solid #444; 
            background: #222; color: white; font-size: 16px;
        }

        button { padding: 10px 20px; border-radius: 5px; background: #e50914; color: white; border: none; cursor: pointer; font-weight: bold; }
        button:hover { background: #b20710; }

        .resultado-container { margin-top: 20px; display: flex; flex-direction: column; align-items: center; }
        
        .movie-row { display: flex; gap: 10px; margin-bottom: 10px; animation: fadeIn 0.5s; }
        
        .box { 
            width: 150px; height: 60px; border: 1px solid #444; 
            display: flex; align-items: center; justify-content: center; 
            background: #1e1e1e; font-weight: bold; border-radius: 4px;
            padding: 5px; font-size: 14px;
        }

        .correct { background-color: #2e7d32 !important; border-color: #4caf50; }
        .wrong { background-color: #c62828 !important; border-color: #f44336; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <h1>Cinedle üé¨</h1>
    <p>Adivinhe o filme secreto do dia!</p>

    <input type="text" id="inputFilme" list="sugestoes" placeholder="Digite um filme..." oninput="buscarSugestoes()">
    
    <datalist id="sugestoes"></datalist>

    <button onclick="fazerPalpite()">Chutar</button>

    <div id="resultado" class="resultado-container"></div>

    <script>
        const API_KEY = '7b13c115c103f83a94753fd427244996'; // <--- Coloque sua chave aqui
        
        // Filme que o jogador precisa acertar (Voc√™ pode sortear um depois)
        const FILME_SECRETO = { title: "Interestelar", year: 2014 };

        // Fun√ß√£o que busca filmes enquanto o usu√°rio digita
        async function buscarSugestoes() {
            const query = document.getElementById('inputFilme').value;
            if (query.length < 3) return; // S√≥ busca depois de 3 letras

            try {
                const url = `https://api.themoviedb.org/3/search/movie?api_key=${API_KEY}&query=${encodeURIComponent(query)}&language=pt-BR`;
                const response = await fetch(url);
                const data = await response.json();
                
                const datalist = document.getElementById('sugestoes');
                datalist.innerHTML = ''; // Limpa as sugest√µes antigas

                // Pega os 5 primeiros resultados
                data.results.slice(0, 5).forEach(filme => {
                    const option = document.createElement('option');
                    const ano = filme.release_date ? `(${filme.release_date.split('-')[0]})` : '';
                    option.value = filme.title; 
                    datalist.appendChild(option);
                });
            } catch (err) {
                console.error("Erro ao buscar sugest√µes", err);
            }
        }

        async function fazerPalpite() {
            const input = document.getElementById('inputFilme');
            const nomeFilme = input.value;
            
            if (!nomeFilme) return;

            const response = await fetch(`https://api.themoviedb.org/3/search/movie?api_key=${API_KEY}&query=${encodeURIComponent(nomeFilme)}&language=pt-BR`);
            const data = await response.json();
            const filmeChutado = data.results[0];

            if (filmeChutado) {
                const anoChutado = filmeChutado.release_date ? parseInt(filmeChutado.release_date.split('-')[0]) : 0;
                exibirResultado(filmeChutado.title, anoChutado);
                input.value = ''; // Limpa o campo ap√≥s o chute
            }
        }

        function exibirResultado(titulo, ano) {
            const container = document.getElementById('resultado');
            const div = document.createElement('div');
            div.className = 'movie-row';
            
            const corAno = (ano === FILME_SECRETO.year) ? 'correct' : 'wrong';
            let seta = "";
            if (ano < FILME_SECRETO.year) seta = " ‚¨ÜÔ∏è";
            else if (ano > FILME_SECRETO.year) seta = " ‚¨áÔ∏è";

            div.innerHTML = `
                <div class="box">${titulo}</div>
                <div class="box ${corAno}">${ano}${seta}</div>
            `;
            
            // Adiciona o chute no topo da lista
            container.insertBefore(div, container.firstChild);

            if (titulo === FILME_SECRETO.title) {
                alert("üéâ PARAB√âNS! Voc√™ acertou o filme!");
            }
        }
    </script>
</body>
</html>
